@using DURAND.Models
@model Estadistica


@{
    ViewBag.Title = "Estadisticas";
    Layout = "~/Views/Shared/_LayoutInterno.cshtml";
}

<div class="container">
    <div class="col-sm-2 col-md-4">
        <h1 class="mt-4 mb-3">
            Estadísticas
        </h1>
    </div>
    <div class="row">
        <div class="col-mb-8">
            <div class="control-group form-group">
                <div class="controls">
                </div>
                Obtener estadística de:@Html.DropDownList("nombreEstadistica", (IEnumerable<SelectListItem>)ViewBag.estadisticaList, new { @class = "form-control" })
            </div>
            <p><input type="button" id="add" value="Obtener &raquo;" class="btn btn-outline-dark"></p>
        </div>
    </div>

    <div id="piechart" style="width: 900px; height: 500px;"></div>
</div>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script src="~/Scripts/jquery-3.3.1.js"></script>
<script>
    $("#add").click(function () {
        $.ajax({
            type: "POST",
            url: "/Home/Estadisticas",
            data: {
                filtro: $("#nombreEstadistica").val()
            },
            success: function (objetos) {
                if (objetos != null) {
                    var as = JSON.parse(objetos);
                    google.charts.load('current', { 'packages': ['corechart'] });
                    google.charts.setOnLoadCallback(drawChart);
                    function drawChart() {
                        var name = as[0].Nombre;
                        var val = as[0].Valor;
                        var data = google.visualization.arrayToDataTable([
                            [name, val]
                           
                        ]);

                       /*for (var i = 0; i < as.length; i++) {
                            var data = google.visualization.arrayToDataTable([
                                [as[i].Nombre, as[i].Valor]
                            ]);*/

                        var chart = new google.visualization.PieChart(document.getElementById('piechart'));

                        chart.draw(data, options);
                    }
                    /*function drawCFDhart() {
                        /*for (var i = 0; i < as.length; i++) {
                            var data = google.visualization.arrayToDataTable([
                                [as[i].Nombre, as[i].Valor]
                            ]);*/
                    /* var data = google.visualization.arrayToDataTable([
                         ['Work', 11],
                         ['Eat', 2],
                         ['Commute', 2],
                         ['Watch TV', 2]
                         ]);
                         var chart = new google.visualization.PieChart(document.getElementById('piechart'));

                         chart.draw(data, options);
                     }*/
                }
            }
        });
           
    });




</script>
